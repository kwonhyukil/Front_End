<template>
    <div>
      <h1>ğŸ”‘ ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘...</h1>
    </div>
  </template>
  
  <script>
  import { useAuthStore } from "../store/authStore";
  import { useRouter } from "vue-router";
  import { onMounted } from "vue";
  
  export default {
    setup() {
      const authStore = useAuthStore();
      const router = useRouter();
  
      onMounted(() => {
        console.log("âœ… AuthPage.vue ë§ˆìš´íŠ¸ë¨");
  
        // ğŸ”¹ URLì—ì„œ í† í° ì¶”ì¶œ
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get("token");
  
        console.log("âœ… URLì—ì„œ ì¶”ì¶œí•œ í† í°:", token); // âœ… í™•ì¸ìš© ë¡œê·¸ ì¶”ê°€
  
        if (token) {
          authStore.setToken(token); // âœ… JWT ì €ì¥
          console.log("âœ… JWT ì €ì¥ ì™„ë£Œ");
          router.push("/home"); // âœ… ë¡œê·¸ì¸ í›„ ì´ë™í•  í˜ì´ì§€
        } else {
          console.log("âŒ í† í°ì´ ì—†ìŒ, ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™");
          router.push("/login");
        }
      });
  
      return { authStore };
    },
  };
  </script>
  